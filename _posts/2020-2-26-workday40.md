---
layout:     post
title:      预训练模型
subtitle:   
date:       2020-2-26
author:     RJ
header-img: 
catalog: true
tags:
    - job

---
<p id = "build"></p>
---

## 数据准备
使用dev的14000条数据进行finetune，按原来测试的test数据集为最终测试数据。

格式规范：

```
1	我这个痘现在越来赴赖人了	我这个痘现在越来越赖人了
2	工伊上意也是很认真的	工作上面也是很认真的
```

之前用ocr进行预训练的数据，得出来63%的检错，27%的纠错率

现在用ai_shell的dev文件进行预训练：

```
        "original_sentence": "图弟市场体向了房企对一二线市场的咖中",
        "corrected_sentence": "图弟市场体现了房企对一二线市场的看中",
        "num_errors": 2,
        "errors": [
            {
                "error_position": 5,
                "original": "向",
                "corrected_to": "现",
                "candidates": {
                    "现": 0.865764319896698,
                    "向": 0.018109602853655815,
                    "示": 0.017614390701055527,
                    "露": 0.01599310338497162,
                    "映": 0.013391084969043732
                },
                "confidence": 0.865764319896698,
                "similarity": 0.8333333333333334,
                "sentence_len": 18
            },
            {
                "error_position": 16,
                "original": "咖",
                "corrected_to": "看",
                "candidates": {
                    "青": 0.07406862825155258,
                    "布": 0.05988834798336029,
                    "垄": 0.05351641774177551,
                    "看": 0.03902788832783699,
                    "重": 0.03881427273154259
                },
                "confidence": 0.03902788832783699,
                "similarity": 0.5,
                "sentence_len": 18
            }
```

连字错误，图第市场。

调试模型，得到：


```python
ocr 1200: 过滤 conf, simi, num: 2.5  5   2
检错率： 0.5594995635728833 检错字数: 11538
过纠率： 0.005192573855772443 过纠字数: 544
纠错率： 0.3614586364077199 纠错字数: 7454

asr 71200: 过滤 conf, simi, num: 2.5  5   2
检错率： 0.6270972747551159 检错字数: 12932
过纠率： 0.007063427671455161 过纠字数: 740
纠错率： 0.3226651149258074 纠错字数: 6654

```



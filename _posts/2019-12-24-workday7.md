---
layout:     post
title:      workday7
subtitle:   
date:       2019-12-23
author:     RJ
header-img: 
catalog: true
tags:
    - Job
---
<p id = "build"></p>
---

## 数据清洗
```python
import os
from tqdm import tqdm
path = './'
#os.chdir(path)

filenames= os.listdir()
file_list = [ filename  for filename in filenames if filename.endswith('.txt')]
file_list
```
得到文件列表：
['aishell_test.txt',
 'chunks.txt',
 'aishell_dev.txt',
 'stcmd.txt',
 'TRANS.txt',
 'aishell_train.txt',
 'aidatatang.txt',
 'stcmd_tch30_aishell_error.txt',
 'prime.txt',
 'cv.syllable.txt',
 'thchs_train.txt',
 'thchs_test.txt',
 'thchs_dev.txt']

 对每一个file，执行：

 ```python
pny_lst = []
han_lst = []
max_length = 0
white_space = ['\n', '\r',  '\t',  ' ']
with open(file_list[1], 'r', encoding='utf8') as f:
    data = f.readlines()  
    for line in tqdm(data):
        wav_file, pny, han = line.split('\t')
        #self.wav_lst.append(wav_file)
        temp_pny = []
        temp_han = []
        for item in pny.split():
            if item not in white_space:
                temp_pny.append(item)
        for item in han:
            if item not in white_space:
                temp_han.append(item)
        
        max_length = max(max_length, len(temp_han))
        if len(temp_pny)!= len(temp_han):
            print(len(temp_pny),'------',temp_pny)
            print(len(temp_han),'------',temp_han)
            
max_length
 ```

 发现常见错误：

 ```
26 ------ ['2005', 'nian2', '9', 'yue4', 'er4', 'ling2', 'mou3', 'ci4', 'wang3', 'shang1', 'da4', 'hui4', 'jie2', 'shu4', 'zhi1', 'hou4', 'ji4', 'zhe3', 'ceng2', 'jing1', 'zai4', 'fei1', 'ji1', 'shang4', 'ou3', 'yu4']
29 ------ ['2', '0', '0', '5', '年', '9', '月', '二', '零', '某', '次', '网', '商', '大', '会', '结', '束', '之', '后', '记', '者', '曾', '经', '在', '飞', '机', '上', '偶', '遇']
 ```